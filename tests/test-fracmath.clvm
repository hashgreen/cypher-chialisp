(a (mod ()

  (include cypher/fracmath.clvm)
  (include cypher/macros.clvm)
  (include cypher/math.clvm)

  (include tests/utils.clvm)

  (defun-inline test-Frac-eq ()
    (@assert
      (@assert (%cf.Frac.eq
        (%cf.Frac 123 321) (%cf.Frac 123 321)))
      "test-fracmath.test-Frac-eq"))

  (defun-inline test-Frac-gt ()
    (@assert
      (@assert (%cf.Frac.gt (%cf.Frac 314159 100000) 3))
      (@assert (%cf.Frac.gt (%cf.Frac -2 1) -3))
      "test-fracmath.test-Frac-gt"))

  (defun-inline test-Frac-gt-one ()
    (@assert
      (@assert (%cf.Frac.gt-one (%cf.Frac 314159 100000)))
      (@assert (%cf.Frac.gt-one (%cf.Frac 2 1)))
      "test-fracmath.test-Frac-gt-one"))

  (defun-inline test-Frac-inv ()
    (@assert
      (@assert (%cf.Frac.eq
        (%cf.Frac.inv (%cf.Frac 10 100)) (%cf.Frac 1000 100)))
      (@assert (%cf.Frac.eq
        (%cf.Frac.inv (%cf.Frac -456 123)) (%cf.Frac -33 123)))
      (@assert-fails (%cf.Frac -1337 -87))
      "test-fracmath.test-Frac-inv"))

  (defun-inline test-Frac ()
    (@assert
      (@assert-fails (%cf.Frac 10 0))
      (test-Frac-eq)
      (test-Frac-gt)
      (test-Frac-gt-one)
      (test-Frac-inv)
      "test-fracmath.test-Frac"))

  (defun-inline test-AshFrac-from-frac ()
    (@assert
      (@assert (%cf.AshFrac.eq
        (%cf.AshFrac.from-frac (%cf.Frac 314159 100000) 10) (%cf.AshFrac 3216 10)))
      "test-fracmath.test-AshFrac-from-frac"))

  (defun-inline test-AshFrac-from-ash-frac ()
    (@assert
      (@assert (%cf.AshFrac.eq
        (%cf.AshFrac.from-ash-frac (%cf.AshFrac 123 4) 10) (%cf.AshFrac 7872 10)))
      "test-fracmath.test-AshFrac-from-ash-frac"))

  (defun-inline test-AshFrac-eq ()
    (@assert
      (@assert (%cf.AshFrac.eq
        (%cf.AshFrac 1234567 10) (%cf.AshFrac 1234567 10)))
      "test-fracmath.test-AshFrac-eq"))

  (defun-inline test-AshFrac-gt ()
    (@assert
      (@assert (%cf.AshFrac.gt (%cf.AshFrac 314159 10) 300))
      (@assert (%cf.AshFrac.gt (%cf.AshFrac -1234567 8) -5000))
      (@assert (%cf.AshFrac.gt (%cf.AshFrac 10 0) 1))
      "test-fracmath.test-AshFrac-gt"))

  (defun-inline test-AshFrac-gt-one ()
    (@assert
      (@assert (%cf.AshFrac.gt-one (%cf.AshFrac 314159 10) 300))
      (@assert (not (%cf.AshFrac.gt-one (%cf.AshFrac 1234 11))))
      "test-fracmath.test-AshFrac-gt-one"))

  (defun-inline test-AshFrac-inv ()
    (@assert
      (@assert (%cf.AshFrac.eq
        (%cf.AshFrac.inv (%cf.AshFrac 1337 10)) (%cf.AshFrac 784 10)))
      "test-fracmath.test-AshFrac-inv"))

  (defun-inline test-AshFrac ()
    (@assert
      (test-AshFrac-from-frac)
      (test-AshFrac-from-ash-frac)
      (test-AshFrac-eq)
      (test-AshFrac-gt)
      (test-AshFrac-gt-one)
      (test-AshFrac-inv)
      "test-fracmath.test-AshFrac"))

  (defun-inline test-fracmath ()
    (@assert
      (test-Frac)
      (test-AshFrac)
      "test-fracmath"))

  (test-fracmath)

) ())
